const A={context:void 0,registry:void 0};function D(e){A.context=e}function z(){return{...A.context,id:`${A.context.id}${A.context.count++}-`,count:0}}const J=(e,t)=>e===t,oe=Symbol("solid-proxy"),Z=Symbol("solid-track"),U={equals:J};let _=Q;const x=1,I=2,M={owned:null,cleanups:null,context:null,owner:null};var o=null;let F=null,i=null,a=null,m=null,R=0;function j(e,t){const n=i,s=o,l=e.length===0,u=t===void 0?s:t,c=l?M:{owned:null,cleanups:null,context:u?u.context:null,owner:u},f=l?e:()=>e(()=>C(()=>$(c)));o=c,i=null;try{return S(f,!0)}finally{i=n,o=s}}function ee(e,t){t=t?Object.assign({},U,t):U;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=l=>(typeof l=="function"&&(l=l(n.value)),P(n,l));return[K.bind(n),s]}function ce(e,t,n){const s=B(e,t,!1,x);T(s)}function te(e,t,n){n=n?Object.assign({},U,n):U;const s=B(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,T(s),K.bind(s)}function ae(e){return S(e,!1)}function C(e){if(i===null)return e();const t=i;i=null;try{return e()}finally{i=t}}function se(e){return o===null||(o.cleanups===null?o.cleanups=[e]:o.cleanups.push(e)),e}function fe(){return i}function K(){if(this.sources&&this.state)if(this.state===x)T(this);else{const e=a;a=null,S(()=>O(this),!1),a=e}if(i){const e=this.observers?this.observers.length:0;i.sources?(i.sources.push(this),i.sourceSlots.push(e)):(i.sources=[this],i.sourceSlots=[e]),this.observers?(this.observers.push(i),this.observerSlots.push(i.sources.length-1)):(this.observers=[i],this.observerSlots=[i.sources.length-1])}return this.value}function P(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&S(()=>{for(let l=0;l<e.observers.length;l+=1){const u=e.observers[l],c=F&&F.running;c&&F.disposed.has(u),(c?!u.tState:!u.state)&&(u.pure?a.push(u):m.push(u),u.observers&&V(u)),c||(u.state=x)}if(a.length>1e6)throw a=[],new Error},!1)),t}function T(e){if(!e.fn)return;$(e);const t=o,n=i,s=R;i=o=e,ne(e,e.value,s),i=n,o=t}function ne(e,t,n){let s;try{s=e.fn(t)}catch(l){return e.pure&&(e.state=x,e.owned&&e.owned.forEach($),e.owned=null),e.updatedAt=n+1,W(l)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?P(e,s):e.value=s,e.updatedAt=n)}function B(e,t,n,s=x,l){const u={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:o,context:o?o.context:null,pure:n};return o===null||o!==M&&(o.owned?o.owned.push(u):o.owned=[u]),u}function G(e){if(e.state===0)return;if(e.state===I)return O(e);if(e.suspense&&C(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<R);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===x)T(e);else if(e.state===I){const s=a;a=null,S(()=>O(e,t[0]),!1),a=s}}function S(e,t){if(a)return e();let n=!1;t||(a=[]),m?n=!0:m=[],R++;try{const s=e();return re(n),s}catch(s){n||(m=null),a=null,W(s)}}function re(e){if(a&&(Q(a),a=null),e)return;const t=m;m=null,t.length&&S(()=>_(t),!1)}function Q(e){for(let t=0;t<e.length;t++)G(e[t])}function O(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const l=s.state;l===x?s!==t&&(!s.updatedAt||s.updatedAt<R)&&G(s):l===I&&O(s,t)}}}function V(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=I,n.pure?a.push(n):m.push(n),n.observers&&V(n))}}function $(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),l=n.observers;if(l&&l.length){const u=l.pop(),c=n.observerSlots.pop();s<l.length&&(u.sourceSlots[c]=s,l[s]=u,n.observerSlots[s]=c)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)$(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function le(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function W(e,t=o){throw le(e)}const ue=Symbol("fallback");function H(e){for(let t=0;t<e.length;t++)e[t]()}function ie(e,t,n={}){let s=[],l=[],u=[],c=0,f=t.length>1?[]:null;return se(()=>H(u)),()=>{let g=e()||[],h,r;return g[Z],C(()=>{let p=g.length,v,E,k,L,N,b,w,d,y;if(p===0)c!==0&&(H(u),u=[],s=[],l=[],c=0,f&&(f=[])),n.fallback&&(s=[ue],l[0]=j(Y=>(u[0]=Y,n.fallback())),c=1);else if(c===0){for(l=new Array(p),r=0;r<p;r++)s[r]=g[r],l[r]=j(q);c=p}else{for(k=new Array(p),L=new Array(p),f&&(N=new Array(p)),b=0,w=Math.min(c,p);b<w&&s[b]===g[b];b++);for(w=c-1,d=p-1;w>=b&&d>=b&&s[w]===g[d];w--,d--)k[d]=l[w],L[d]=u[w],f&&(N[d]=f[w]);for(v=new Map,E=new Array(d+1),r=d;r>=b;r--)y=g[r],h=v.get(y),E[r]=h===void 0?-1:h,v.set(y,r);for(h=b;h<=w;h++)y=s[h],r=v.get(y),r!==void 0&&r!==-1?(k[r]=l[h],L[r]=u[h],f&&(N[r]=f[h]),r=E[r],v.set(y,r)):u[h]();for(r=b;r<p;r++)r in k?(l[r]=k[r],u[r]=L[r],f&&(f[r]=N[r],f[r](r))):l[r]=j(q);l=l.slice(0,c=p),s=g.slice(0)}return l});function q(p){if(u[r]=p,f){const[v,E]=ee(r);return f[r]=E,t(g[r],v)}return t(g[r])}}}let X=!1;function pe(){X=!0}function he(e,t){if(X&&A.context){const n=A.context;D(z());const s=C(()=>e(t||{}));return D(n),s}return C(()=>e(t||{}))}function be(e){const t="fallback"in e&&{fallback:()=>e.fallback};return te(ie(()=>e.each,e.children,t||void 0))}export{oe as $,be as F,ce as a,j as b,he as c,Z as d,pe as e,ae as f,fe as g,ee as h,A as s,C as u};
