import{$ as u,d as k,g as j,f as z,h as E}from "./solid.2784103e.js";const b=Symbol("store-raw"),d=Symbol("store-node"),l=Symbol("store-has"),D=Symbol("store-self");function R(e){let n=e[u];if(!n&&(Object.defineProperty(e,u,{value:n=new Proxy(e,H)}),!Array.isArray(e))){const r=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let i=0,t=r.length; i<t; i++){const f=r[i];o[f].get&&Object.defineProperty(e,f,{enumerable:o[f].enumerable,get:o[f].get.bind(n)})}}return n}function g(e){let n;return e!=null&&typeof e=="object"&&(e[u]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function a(e, n=new Set){let r,o,i,t;if(r=e!=null&&e[b])return r;if(!g(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let f=0,c=e.length; f<c; f++)i=e[f],(o=a(i,n))!==i&&(e[f]=o)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const f=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let s=0,$=f.length; s<$; s++)t=f[s],!c[t].get&&(i=e[t],(o=a(i,n))!==i&&(e[t]=o))}return e}function O(e, n){let r=e[n];return r||Object.defineProperty(e,n,{value:r=Object.create(null)}),r}function A(e, n, r){if(e[n])return e[n];const[o,i]=E(r,{equals:!1,internal:!0});return o.$=i,e[n]=o}function q(e, n){const r=Reflect.getOwnPropertyDescriptor(e,n);return!r||r.get||!r.configurable||n===u||n===d||(delete r.value,delete r.writable,r.get=()=>e[u][n]),r}function K(e){j()&&A(O(e,d),D)()}function C(e){return K(e),Reflect.ownKeys(e)}const H={get(e, n, r){if(n===b)return e;if(n===u)return r;if(n===k)return K(e),r;const o=O(e,d),i=o[n];let t=i?i():e[n];if(n===d||n===l||n==="__proto__")return t;if(!i){const f=Object.getOwnPropertyDescriptor(e,n);j()&&(typeof t!="function"||e.hasOwnProperty(n))&&!(f&&f.get)&&(t=A(o,n,t)())}return g(t)?R(t):t},has(e, n){return n===b||n===u||n===k||n===d||n===l||n==="__proto__"?!0:(j()&&A(O(e,l),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:C,getOwnPropertyDescriptor:q};function y(e, n, r, o=!1){if(!o&&e[n]===r)return;const i=e[n],t=e.length;r===void 0?(delete e[n],e[l]&&e[l][n]&&i!==void 0&&e[l][n].$()):(e[n]=r,e[l]&&e[l][n]&&i===void 0&&e[l][n].$());let f=O(e,d),c;if((c=A(f,n,i))&&c.$(()=>r),Array.isArray(e)&&e.length!==t){for(let s=e.length; s<t; s++)(c=f[s])&&c.$();(c=A(f,"length",t))&&c.$(e.length)}(c=f[D])&&c.$()}function N(e, n){const r=Object.keys(n);for(let o=0; o<r.length; o+=1){const i=r[o];y(e,i,n[i])}}function M(e, n){if(typeof n=="function"&&(n=n(e)),n=a(n),Array.isArray(n)){if(e===n)return;let r=0,o=n.length;for(; r<o; r++){const i=n[r];e[r]!==i&&y(e,r,i)}y(e,"length",o)}else N(e,n)}function h(e, n, r=[]){let o,i=e;if(n.length>1){o=n.shift();const f=typeof o,c=Array.isArray(e);if(Array.isArray(o)){for(let s=0; s<o.length; s++)h(e,[o[s]].concat(n),r);return}else if(c&&f==="function"){for(let s=0; s<e.length; s++)o(e[s],s)&&h(e,[s].concat(n),r);return}else if(c&&f==="object"){const{from:s=0,to:$=e.length-1,by:W=1}=o;for(let S=s; S<=$; S+=W)h(e,[S].concat(n),r);return}else if(n.length>1){h(e[o],n,[o].concat(r));return}i=e[o],r=[o].concat(r)}let t=n[0];typeof t=="function"&&(t=t(i,r),t===i)||o===void 0&&t==null||(t=a(t),o===void 0||g(i)&&g(t)&&!Array.isArray(t)?N(i,t):y(e,o,t))}function T(...[e,n]){const r=a(e||{}),o=Array.isArray(r),i=R(r);function t(...f){z(()=>{o&&f.length===1?M(r,f[0]):h(r,f)})}return[i,t]}const w=new WeakMap,F={get(e, n){if(n===b)return e;const r=e[n];let o;return g(r)?w.get(r)||(w.set(r,o=new Proxy(r,F)),o):r},set(e, n, r){return y(e,n,a(r)),!0},deleteProperty(e, n){return y(e,n,void 0,!0),!0}};function P(e){return n=>{if(g(n)){let r;(r=w.get(n))||w.set(n,r=new Proxy(n,F)),e(r)}return n}}const[X,L]=T([]),[Y,_]=T([]),G= e=>{L(P(n=>{n.push(e)})),X.length>128&&L(P(n=>{n.shift()}))},I= e=>{_(P(n=>{n.push(e)})),Y.length>128&&_(P(n=>{n.shift()}))};export{Y as a,G as b,I as c,X as s};
