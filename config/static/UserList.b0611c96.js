import{d as pe,g as d,i as s,a as C,u as L,s as H,t as h,b as Ce}from"./web.1f1bf9cb.js";import{i as ye,h as q,j as z,c as $,a as B,S as y,F as Se}from"./solid.0959ea88.js";import{c as ke,p as G}from"./store.11b9c9bf.js";let g=[{name:"admin",id:"admin",email:"admin@example.com",authority:"admin"},{name:"user",id:"user",email:"user1@example.com",authority:"user"},{name:"user2",id:"user2",email:"user2@example.com",authority:"user"}];const ve=async()=>await[...g],J=async n=>g.filter(r=>r.id===n).length===0?!1:(g=g.filter(r=>r.id!==n),!0),we=h('<div class="flex justify-end"><button class="btn btn-error btn-sm text-white">Delete'),Ee=h('<div class=overflow-x-auto><table class=table><thead><tr><th><label><input type=checkbox class=checkbox></label></th><th>ID</th><th>Name</th><th>E-Mail</th><th>Authority</th><th></th></tr></thead><tbody></tbody></table><dialog id=delete-selected-users class=modal><div class=modal-box><h3 class="text-center text-lg font-bold">Confirm deleting users</h3><p class=py-4>Press ESC key or click the cancel button to cancel.</p><div class="mt-6 flex justify-end gap-2"><button class=btn>Confirm</button><button class="btn btn-primary">Cancel</button></div></div></dialog><dialog id=delete-user class=modal><div class=modal-box><h3 class="text-center text-lg font-bold">Confirm deleting user</h3><p class=py-4>Press ESC key or click the cancel button to cancel.</p><div class="mt-6 flex justify-end gap-2"><button class=btn>Confirm</button><button class="btn btn-primary">Cancel'),Ue=h("<label><input type=checkbox class=checkbox>"),De=h('<button class="btn btn-error btn-sm text-white">Delete'),je=h('<tr><th></th><td></td><td></td><td></td><td></td><td><div class="flex items-center justify-end gap-2"><button class="btn btn-sm">Detail</button><button class="btn btn-warning btn-sm text-white">Edit</button><!$><!/>'),Me=()=>{const[n,{mutate:r}]=ye(ve),[b,m]=ke([]),[K,_]=q(!1),[S,O]=q("");let a,c;z(()=>{n.loading||m(Array.from({length:n().length},()=>!1))});const Q=e=>{m(G(t=>t[e]=!t[e]))},T=()=>{m(G(e=>{const t=e.every(i=>i);e.forEach((i,x)=>e[x]=!t)}))},V=async()=>{await J(S())&&r(t=>t?.filter(i=>i.id!==S()))},W=()=>{n()?.map((e,t)=>b[t]?e.id:null).filter(e=>e!==null).forEach(async e=>{await J(e)&&r(t=>t?.filter(i=>i.id!==e))})};return z(()=>{if(n.loading||b.length===0){_(!1);return}b.every(e=>e)?_(!0):_(!1)}),(()=>{const e=d(Ee),t=e.firstChild,i=t.firstChild,x=i.firstChild,k=x.firstChild,X=k.firstChild,v=X.firstChild,Y=k.nextSibling,Z=Y.nextSibling,ee=Z.nextSibling,te=ee.nextSibling,le=te.nextSibling,ne=i.nextSibling,f=t.nextSibling,ie=f.firstChild,se=ie.firstChild,re=se.nextSibling,ae=re.nextSibling,w=ae.firstChild,ce=w.nextSibling,p=f.nextSibling,oe=p.firstChild,de=oe.firstChild,he=de.nextSibling,be=he.nextSibling,E=be.firstChild,fe=E.nextSibling;v.addEventListener("change",T),s(le,$(y,{get when(){return!n.loading},get children(){const l=d(we),u=l.firstChild;return u.$$click=()=>c?.showModal(),C(),l}})),s(ne,$(Se,{get each(){return n()},children:(l,u)=>(()=>{const j=d(je),A=j.firstChild,R=A.nextSibling,I=R.nextSibling,M=I.nextSibling,N=M.nextSibling,ue=N.nextSibling,P=ue.firstChild,$e=P.firstChild,ge=$e.nextSibling,me=ge.nextSibling,[_e,xe]=Ce(me.nextSibling);return s(A,$(y,{get when(){return l.id!=="admin"},get children(){const o=d(Ue),F=o.firstChild;return F.addEventListener("change",()=>{Q(u())}),B(()=>H(F,"checked",b[u()])),o}})),s(R,()=>l.id),s(I,()=>l.name),s(M,()=>l.email),s(N,()=>l.authority),s(P,$(y,{get when(){return l.id!=="admin"},get children(){const o=d(De);return o.$$click=()=>{O(l.id),a?.showModal()},C(),o}}),_e,xe),j})()}));const U=c;typeof U=="function"?L(U,f):c=f,w.$$click=()=>{W(),c?.close()},ce.$$click=()=>c?.close();const D=a;return typeof D=="function"?L(D,p):a=p,E.$$click=()=>{V(),a?.close()},fe.$$click=()=>a?.close(),B(()=>H(v,"checked",K())),C(),e})()};pe(["click"]);export{Me as default};
